--[[
    Script de Mod Menu para Roblox
    Criado para ser usado em executores de script como o Delta.
    Funcionalidades: No Clip, Velocidade, Voo, Teleporte com Clique e Ações em Jogadores.
]]

-- CONFIGURAÇÕES
local VELOCIDADE_PADRAO = 16
local VELOCIDADE_AUMENTADA = 100
local PODER_PULO_PADRAO = 50

-- VARIÁVEIS DE CONTROLE
local noclipEnabled = false
local flyEnabled = false
local speedEnabled = false
local clickTeleportEnabled = false
local vooCorrendo = nil

-- REFERÊNCIAS DO JOGADOR LOCAL
local jogadorLocal = game:GetService("Players").LocalPlayer
local mouse = jogadorLocal:GetMouse()

-- FUNÇÃO PARA CRIAR A INTERFACE GRÁFICA (GUI)
local function criarInterface()
    -- Tela principal da GUI
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "ModMenuGui"
    screenGui.Parent = jogadorLocal:WaitForChild("PlayerGui")
    screenGui.ResetOnSpawn = false

    -- Janela principal do menu
    local mainFrame = Instance.new("Frame")
    mainFrame.Name = "MainFrame"
    mainFrame.Parent = screenGui
    mainFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 45)
    mainFrame.BorderColor3 = Color3.fromRGB(80, 80, 120)
    mainFrame.BorderSizePixel = 2
    mainFrame.Position = UDim2.new(0.1, 0, 0.1, 0)
    mainFrame.Size = UDim2.new(0, 400, 0, 350)
    mainFrame.Active = true
    mainFrame.Draggable = true

    -- Barra de título
    local titleBar = Instance.new("Frame")
    titleBar.Name = "TitleBar"
    titleBar.Parent = mainFrame
    titleBar.BackgroundColor3 = Color3.fromRGB(50, 50, 65)
    titleBar.Size = UDim2.new(1, 0, 0, 30)

    local titleLabel = Instance.new("TextLabel")
    titleLabel.Name = "TitleLabel"
    titleLabel.Parent = titleBar
    titleLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    titleLabel.BackgroundTransparency = 1
    titleLabel.Size = UDim2.new(1, -60, 1, 0)
    titleLabel.Font = Enum.Font.SourceSansBold
    titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    titleLabel.Text = "Mod Menu | Powered by Script"
    titleLabel.TextSize = 18

    -- Botão de fechar
    local closeButton = Instance.new("TextButton")
    closeButton.Name = "CloseButton"
    closeButton.Parent = titleBar
    closeButton.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
    closeButton.Size = UDim2.new(0, 30, 1, 0)
    closeButton.Position = UDim2.new(1, -30, 0, 0)
    closeButton.Font = Enum.Font.SourceSansBold
    closeButton.Text = "X"
    closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    closeButton.TextSize = 20
    closeButton.MouseButton1Click:Connect(function()
        screenGui:Destroy()
    end)

    -- Botão de minimizar
    local minimizeButton = Instance.new("TextButton")
    minimizeButton.Name = "MinimizeButton"
    minimizeButton.Parent = titleBar
    minimizeButton.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
    minimizeButton.Size = UDim2.new(0, 30, 1, 0)
    minimizeButton.Position = UDim2.new(1, -60, 0, 0)
    minimizeButton.Font = Enum.Font.SourceSansBold
    minimizeButton.Text = "-"
    minimizeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    minimizeButton.TextSize = 24

    local contentFrame = mainFrame:FindFirstChild("Content") or mainFrame
    local isMinimized = false
    minimizeButton.MouseButton1Click:Connect(function()
        isMinimized = not isMinimized
        contentFrame.Visible = not isMinimized
        if isMinimized then
            mainFrame.Size = UDim2.new(0, 400, 0, 30)
            minimizeButton.Text = "+"
        else
            mainFrame.Size = UDim2.new(0, 400, 0, 350)
            minimizeButton.Text = "-"
        end
    end)

    -- Container de conteúdo
    local contentFrame = Instance.new("Frame")
    contentFrame.Name = "Content"
    contentFrame.Parent = mainFrame
    contentFrame.BackgroundTransparency = 1
    contentFrame.Size = UDim2.new(1, 0, 1, -30)
    contentFrame.Position = UDim2.new(0, 0, 0, 30)
    
    -- Layout para organizar os botões
    local uiListLayout = Instance.new("UIListLayout")
    uiListLayout.Parent = contentFrame
    uiListLayout.Padding = UDim.new(0, 5)
    uiListLayout.SortOrder = Enum.SortOrder.LayoutOrder

    -- ### BOTÕES DE FUNÇÕES ###

    -- Função para criar um botão padrão
    local function criarBotao(nome, texto, parent, callback)
        local button = Instance.new("TextButton")
        button.Name = nome
        button.Parent = parent
        button.BackgroundColor3 = Color3.fromRGB(60, 60, 80)
        button.BorderColor3 = Color3.fromRGB(100, 100, 140)
        button.Size = UDim2.new(1, -10, 0, 30)
        button.Position = UDim2.new(0, 5, 0, 0)
        button.Font = Enum.Font.SourceSans
        button.TextColor3 = Color3.fromRGB(255, 255, 255)
        button.TextSize = 16
        button.Text = texto
        button.MouseButton1Click:Connect(callback)
        return button
    end

    -- Botão No Clip
    local noClipButton = criarBotao("NoClipButton", "No Clip: OFF", contentFrame, function(button)
        noclipEnabled = not noclipEnabled
        button.Text = "No Clip: " .. (noclipEnabled and "ON" or "OFF")
        button.BackgroundColor3 = noclipEnabled and Color3.fromRGB(80, 120, 80) or Color3.fromRGB(60, 60, 80)
    end)

    -- Botão Velocidade
    local speedButton = criarBotao("SpeedButton", "Velocidade: OFF", contentFrame, function(button)
        speedEnabled = not speedEnabled
        local char = jogadorLocal.Character
        if char and char:FindFirstChild("Humanoid") then
            char.Humanoid.WalkSpeed = speedEnabled and VELOCIDADE_AUMENTADA or VELOCIDADE_PADRAO
        end
        button.Text = "Velocidade: " .. (speedEnabled and "ON" or "OFF")
        button.BackgroundColor3 = speedEnabled and Color3.fromRGB(80, 120, 80) or Color3.fromRGB(60, 60, 80)
    end)
    
    -- Botão Voar
    local flyButton = criarBotao("FlyButton", "Voar: OFF", contentFrame, function(button)
        flyEnabled = not flyEnabled
        button.Text = "Voar: " .. (flyEnabled and "ON" or "OFF")
        button.BackgroundColor3 = flyEnabled and Color3.fromRGB(80, 120, 80) or Color3.fromRGB(60, 60, 80)
        
        if not flyEnabled and vooCorrendo then
            vooCorrendo:Disconnect()
            vooCorrendo = nil
        end
    end)
    
    -- Botão Teleporte com Clique
    local clickTpButton = criarBotao("ClickTpButton", "Teleporte com Clique: OFF", contentFrame, function(button)
        clickTeleportEnabled = not clickTeleportEnabled
        button.Text = "Teleporte com Clique: " .. (clickTeleportEnabled and "ON" or "OFF")
        button.BackgroundColor3 = clickTeleportEnabled and Color3.fromRGB(80, 120, 80) or Color3.fromRGB(60, 60, 80)
    end)
    
    -- ### LISTA DE JOGADORES ###
    local playersFrame = Instance.new("ScrollingFrame")
    playersFrame.Parent = contentFrame
    playersFrame.BackgroundColor3 = Color3.fromRGB(45, 45, 55)
    playersFrame.Size = UDim2.new(1, -10, 0.5, 0)
    playersFrame.Position = UDim2.new(0, 5, 0, 0)
    playersFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
    playersFrame.ScrollBarThickness = 6

    local playerListLayout = Instance.new("UIListLayout")
    playerListLayout.Parent = playersFrame
    playerListLayout.SortOrder = Enum.SortOrder.Name
    playerListLayout.Padding = UDim.new(0, 2)
    
    local playerActionFrame = nil

    -- Função para atualizar a lista de jogadores
    function atualizarListaJogadores()
        for _, child in pairs(playersFrame:GetChildren()) do
            if child:IsA("TextButton") then
                child:Destroy()
            end
        end
        
        local ySize = 0
        for _, player in pairs(game:GetService("Players"):GetPlayers()) do
            if player ~= jogadorLocal then
                local playerButton = Instance.new("TextButton")
                playerButton.Name = player.Name
                playerButton.Parent = playersFrame
                playerButton.BackgroundColor3 = Color3.fromRGB(55, 55, 75)
                playerButton.Size = UDim2.new(1, 0, 0, 25)
                playerButton.Text = player.Name
                playerButton.TextColor3 = Color3.fromRGB(220, 220, 220)
                playerButton.Font = Enum.Font.SourceSans
                playerButton.TextSize = 14
                
                ySize = ySize + 27
                
                -- Menu de ações para o jogador
                playerButton.MouseButton1Click:Connect(function()
                    if playerActionFrame then playerActionFrame:Destroy() end
                    
                    playerActionFrame = Instance.new("Frame")
                    playerActionFrame.Parent = mainFrame
                    playerActionFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
                    playerActionFrame.BorderSizePixel = 1
                    playerActionFrame.BorderColor3 = Color3.fromRGB(70,70,110)
                    playerActionFrame.Size = UDim2.new(0, 150, 0, 155)
                    playerActionFrame.Position = UDim2.new(0, mainFrame.AbsoluteSize.X, 0, 0)
                    
                    local actionLayout = Instance.new("UIListLayout")
                    actionLayout.Parent = playerActionFrame
                    actionLayout.Padding = UDim.new(0, 2)
                    
                    criarBotao("Teleportar", "Teleportar", playerActionFrame, function()
                        local alvoChar = player.Character
                        if alvoChar and alvoChar:FindFirstChild("HumanoidRootPart") then
                            jogadorLocal.Character.HumanoidRootPart.CFrame = alvoChar.HumanoidRootPart.CFrame
                        end
                        playerActionFrame:Destroy()
                    end)
                    
                    criarBotao("Trazer", "Trazer", playerActionFrame, function()
                       local alvoChar = player.Character
                       if alvoChar and alvoChar:FindFirstChild("HumanoidRootPart") and jogadorLocal.Character then
                           alvoChar.HumanoidRootPart.CFrame = jogadorLocal.Character.HumanoidRootPart.CFrame
                       end
                       playerActionFrame:Destroy()
                    end)
                    
                    criarBotao("Explodir", "Explodir", playerActionFrame, function()
                        local alvoChar = player.Character
                        if alvoChar and alvoChar:FindFirstChild("HumanoidRootPart") then
                            local explosion = Instance.new("Explosion")
                            explosion.Position = alvoChar.HumanoidRootPart.Position
                            explosion.Parent = game.Workspace
                        end
                        playerActionFrame:Destroy()
                    end)
                    
                    criarBotao("Matar", "Matar", playerActionFrame, function()
                       local alvoChar = player.Character
                       if alvoChar and alvoChar:FindFirstChild("Humanoid") then
                           alvoChar.Humanoid.Health = 0
                       end
                       playerActionFrame:Destroy()
                    end)
                    
                     criarBotao("Kick", "Kick", playerActionFrame, function()
                       player:Kick("Você foi removido da partida.")
                       playerActionFrame:Destroy()
                    end)
                end)
            end
        end
        playersFrame.CanvasSize = UDim2.new(0, 0, 0, ySize)
    end
    
    -- Atualiza a lista quando um jogador entra ou sai
    game:GetService("Players").PlayerAdded:Connect(atualizarListaJogadores)
    game:GetService("Players").PlayerRemoving:Connect(atualizarListaJogadores)
    
    -- Carrega a lista inicial
    atualizarListaJogadores()

end

-- ### LÓGICA DAS FUNÇÕES (EXECUTADAS EM LOOP) ###

-- Conecta a lógica a cada frame do jogo
game:GetService("RunService").RenderStepped:Connect(function()
    -- Lógica No Clip
    if noclipEnabled and jogadorLocal.Character then
        for _, part in pairs(jogadorLocal.Character:GetDescendants()) do
            if part:IsA("BasePart") and part.CanCollide then
                part.CanCollide = false
            end
        end
    end
    
    -- Lógica do Voo
    if flyEnabled and jogadorLocal.Character then
        local humanoid = jogadorLocal.Character:FindFirstChildOfClass("Humanoid")
        if humanoid then
            humanoid.PlatformStand = true
            if vooCorrendo == nil then
                vooCorrendo = game:GetService("UserInputService").InputBegan:Connect(function(input)
                    if input.KeyCode == Enum.KeyCode.W then
                        jogadorLocal.Character.HumanoidRootPart.Velocity = mouse.UnitRay.Direction * 100
                    elseif input.KeyCode == Enum.KeyCode.S then
                        jogadorLocal.Character.HumanoidRootPart.Velocity = -mouse.UnitRay.Direction * 100
                    end
                end)
            end
        end
    elseif not flyEnabled and jogadorLocal.Character then
        local humanoid = jogadorLocal.Character:FindFirstChildOfClass("Humanoid")
        if humanoid and humanoid.PlatformStand then
            humanoid.PlatformStand = false
        end
    end
end)

-- Lógica do Teleporte com Clique
mouse.Button1Down:Connect(function()
    if clickTeleportEnabled and jogadorLocal.Character and jogadorLocal.Character:FindFirstChild("HumanoidRootPart") then
        local target = mouse.Target
        if target then
            jogadorLocal.Character.HumanoidRootPart.CFrame = CFrame.new(mouse.Hit.p)
        end
    end
end)

-- Inicia a interface
criarInterface()